@model CDMIS.ViewModels.UserViewModel
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewBag.Title = "用户维护";
}
<link href="../../Content/jquery.dataTables.css" rel="stylesheet" type="text/css" />
<link href="../../Content/simpleModal.css" rel="stylesheet" type="text/css" />
<link rel="Stylesheet" href="../../Content/chosen.css" />

<script type="text/javascript" src="../../Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="../../Scripts/MicrosoftAjax.js"></script>
<script type="text/javascript" src="../../Scripts/MicrosoftMvcAjax.js"></script>
<script type="text/javascript" src="../../Scripts/jquery.unobtrusive-ajax.min.js"></script>

<script type="text/javascript" src="../../Scripts/jquery.dataTables.js"></script>
<script type="text/javascript" src="../../Scripts/chosen.jquery.min.js"></script>
<script type="text/javascript" src="../../Scripts/jquery.simplemodal.1.4.4.min.js"></script>

<script type="text/javascript" src="../../Scripts/My97DatePicker/WdatePicker.js"></script>

<style type="text/css">

    
    #alert-container
    {
        height: 120px;
        width: 300px;
    }
</style>
 

<div width="100%" style="border: 0; " >

                        @using (Ajax.BeginForm("UserPartialView", "Management", null,
                            new AjaxOptions
                            {
                                UpdateTargetId = "UserSearchContainer",
                                HttpMethod = "Post",
                                OnSuccess = " ",
                            }))
                        { 

                                    <div class="form-group">
                                        <label class="col-sm-1 control-label">
                                            角色：</label>
                                        <div class="col-sm-3">
                                           @Html.TextBoxFor(model => model.Role, new { id = "SearchRole", @onkeydown = "onSearch()", @class = "form-control" })
                                        </div>
                                    
                                            <label class="col-sm-1 control-label">
                                                ID：</label>
                                            <div class="col-sm-3">
                                                @Html.TextBoxFor(model => model.SearchUserId, new { id = "SearchUserId", @onkeydown = "onSearch()", @class = "form-control" })
                                            </div>
                                      
                                            <label class="col-sm-1 control-label">
                                                姓名：</label>
                                            <div class="col-sm-3">
                                                @Html.TextBoxFor(model => model.SearchUserName, new { id = "SearchUserName", @onkeydown = "onSearch()", @class = "form-control" })
                                            </div>
                                       </div>
                                       <div style="height:50px; visibility: hidden"></div>
                            <div class="form-group" style="float:right">
                                <div class="col-sm-8">
                                    @Html.DropDownListFor(m => m.Patient.Class, Model.UserClassList(), new { id = "newUserClass", style = "font-size:18px", @class = "form-control" })
                                    </div>
                                 <div class="col-sm-4" >
                                    <input type="button" class = "btn btn-primary" id="NewRole" value="新建" style="font-size: 16px;"/>
                                </div>
                            </div>
                               
                            
                        }
                        <div style="height:50px; visibility: hidden"></div>
                        <fieldset style="width:55%;float:left; height: 700px">
                     <legend>用户信息列表</legend>   
                        <div id="UserSearchContainer">@*style="width:50%;float:left"*@
                            <table width="50%" id="UserListDT" class="display" >
                                <thead class="fixedHeader">
                                    <tr>
                                        <th width="160px">
                                            用户ID
                                        </th>
                                        <th width="160px">
                                            姓名
                                        </th>
                                        <th width="160px">
                                            密码
                                        </th>
                                        <th width="160px"  style="display: none;">
                                            用户类别编码
                                        </th>
                                        <th width="160px">
                                            用户类别
                                        </th>
                                        <th width="160px">
                                            密码有效期
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="scrollContent">
                                    @if (Model.RowCount > 0)
                                    {
                                        foreach (var item in Model.UserList)
                                        {
                                        <tr class="normalRow">
                                            <td width="160px">@item.UserId
                                            </td>
                                            <td width="90px">@item.UserName
                                            </td>
                                            <td width="110px">@item.Password
                                            </td>
                                            <td width="110px" style="display: none;">@item.Class
                                            </td>
                                            <td width="110px">@item.ClassName
                                            </td>
                                            <td width="110px">@item.EndDate
                                            </td>
                                        </tr>
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                        </fieldset>
                <div style="width: 42%; height: 500px; float:right;">

                @Html.ValidationSummary(true, "User Information update was unsuccessful. Please correct the errors and try again.")
                @using (Html.BeginForm("Index", "UserManagement", FormMethod.Post, new { id = "Form1", @class = "form-horizontal", role = "form", enctype = "multipart/form-data" }))
                {
                 
                <div id="setUserInfo" >
                <fieldset>
                     <legend>用户信息设定</legend>   

                        <div class="form-group">
                            <label class="col-sm-4 control-label">
                                用户ID：</label>
                            <div class="col-sm-8">
                                @Html.TextBoxFor(m => m.Patient.UserId, new { @readonly="true" ,id = "txtUserId" , @class = "form-control"})
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-4 control-label">
                                用户名：</label>
                            <div class="col-sm-8">
                                @Html.TextBoxFor(m => m.Patient.UserName, new { id = "txtUserName", @class = "form-control" })
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-4 control-label">
                                用户类别：</label>
                            <div class="col-sm-8">
                                @Html.TextBoxFor(m => m.Patient.ClassName, new { @readonly = "true", id = "userClassList", @class = "form-control" })
                                @*@Html.DropDownListFor(m => m.Patient.ClassName, Model.UserClassList(), new { id = "userClassList", style = "font-size:18px", @class = "form-control" })*@
                            </div>
                        </div>
                        <div class="form-group" style="display:none">
                            <label class="col-sm-4 control-label">
                                用户类别代码：</label>
                            <div class="col-sm-8">
                                @Html.TextBoxFor(m => m.Patient.Class, new { @readonly = "true", id = "userClassCode", @class = "form-control" })
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-4 control-label">
                                密码：</label>
                            <div class="col-sm-8">
                                @Html.TextBoxFor(m => m.Patient.Password, new { id = "txtPassword", @class = "form-control" })
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-4 control-label">
                                密码有效期：</label>
                            <div class="col-sm-8">
                                @Html.TextBoxFor(model => model.Patient.EndDate, new { id = "EndDate", @class = "form-control", @onclick = "WdatePicker({startDate:'1991-02-14',dateFmt:'yyyy-MM-dd'})" })
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-4 control-label">
                                手机号：</label>
                            <div class="col-sm-8">
                                @Html.TextBoxFor(model => model.Patient.PhoneNo, new { id = "PhoneNo", @class = "form-control" })
                            </div>
                        </div>

                        <div id="CoachAndDoc" style="display:none" >
                            <div class="form-group">
                                <label class="col-sm-4 control-label">
                                    工作单位：</label>
                                <div class="col-sm-8">
                                    @*@Html.TextBoxFor(m => m.UnitName, new { id = "UnitName", @class = "form-control" })*@
                                    @Html.DropDownListFor(m => m.UnitName, Model.GetHospitalList(), new { id = "UnitName", @class = "form-control" })
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">
                                    科室：</label>
                                <div class="col-sm-8">
                                    @*@Html.TextBoxFor(m => m.Dept, new { id = "Dept", @class = "form-control" })*@
                                    @Html.DropDownListFor(m => m.Dept, Model.GetDeptList(), new { id = "Dept", @class = "form-control" })
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">
                                    职务：</label>
                                <div class="col-sm-8">
                                    @Html.TextBoxFor(m => m.JobTitle, new { id = "JobTitle", @class = "form-control" })
                                </div>
                            </div>
                        </div>

                        <div id="DocMod"  class="form-group">
                            <label class="col-sm-4 control-label">
                                模块：</label>
                            <div class="col-sm-8">
                                @Html.ListBoxFor(m => m.models, Model.ModelsTypeList, new { id = "Modules", @class = "form-control chzn-select", multiple = "multiple", style = "font-size:34px;width:100%;height:34px;" }) 
                            </div>
                        </div>


                        <div class="form-group">
                            <div class="col-sm-3">
                            </div>
                            <div class="col-sm-3">
                                <input type="button" class="btn btn-primary" id="Save" value="保存" style="font-size: 16px;
                                    margin-top: 30px" />
                            </div>
                            <div class="col-sm-3">
                                <input type="button" class="btn btn-primary" id="Cancel" value="取消" style="font-size: 16px;
                                    margin-top: 30px" />
                            </div>
                            <div class="col-sm-3">
                            </div>
                        </div>




                </fieldset>
                </div>
                }
                </div>

    
</div>


<div id="addDataDiv" style="display: none;">
        <div class="modalHeader">
            <span>信息错误！</span></div>
        <div class="modalContent">
            <center>
            <p id="addDataP"></p>
            <input type="button" class="btn btn-default simplemodal-close" value="确定" />
        </center>
        </div>
    </div>
<div id="success" style="display: none;">
        <div class="modalHeader">
            <span></span></div>
        <div class="modalContent">
            <center>
            <p id="successD"></p>
            <input type="button" class="btn btn-default simplemodal-close" value="确定" />
        </center>
        </div>
    </div>

<script type="text/javascript">
    function hide() {
        var target = document.getElementById("UserListDT");
        target.style.display = "none";
    }
    function success() {
        var target = document.getElementById("UserListDT");
        target.style.display = "block";
    }

    $(document).ready(function () {
        $("#menu a").attr("id", ""); //Reset id's 
        $("#menu li:eq(0) a").attr("id", "current");

        var table = $('#UserListDT').DataTable({
            "oLanguage": {//语言国际化
                "sUrl": "/Content/jquery.dataTable.cn.txt"
            },
            "bAutoWidth": false,
            "bPaginate": false,  //是否分页。
            "sScrollX": "100%",
            "sScrollY": "250px",
            "order": [3, 'desc'],   //排序
            "bFilter": false

        });

        //$(".chosen").trigger('liszt:updated');
        $('.chzn-select').chosen({
            placeholder_text_multiple: " "
        });

        //$(".chosen").chosen().change();
        //        $(".chosen").trigger('chosen:updated');

        //   $('#DocMod').attr('style', "display:none");
        $('#DocMod').css("display", "none");

        $.ajax({                                                //初始化日期控件为系统当前时间+1年（默认密码有效期为一年）
            url: "/Management/GetDefaultEndTime",
            type: "GET",
            dataType: "json",
            async: false,
            data: {},
            success: function (res) {
                document.getElementById("EndDate").value = res.toString();
            }
        });

        $(document).on('dblclick', ".normalRow", function () {

            document.getElementById("txtUserId").value = trim($(this).find("td:eq(0)").text());
            var userId = trim($(this).find("td:eq(0)").text());
            document.getElementById("txtUserName").value = trim($(this).find("td:eq(1)").text());
            document.getElementById("txtPassword").value = trim($(this).find("td:eq(2)").text());
            var userClassCode = trim($(this).find("td:eq(3)").text());
            var userClass = trim($(this).find("td:eq(4)").text());
            document.getElementById("userClassList").value = userClass;
            document.getElementById("userClassCode").value = userClassCode;
            //            var classCode = trim($(this).find("td:eq(3)").text());
            //            $("#userClassList").val(classCode);
            document.getElementById("EndDate").value = $(this).find("td:eq(5)").text();
            document.getElementById("PhoneNo").value = GetPhoneNo(userId);

            if (userClassCode == 'HealthCoach') {
                $('#CoachAndDoc').css("display", "block");
                $('#DocMod').css("display", "none");
                GetDoctorDetailInfo(userId, userClassCode);
            }
            else if (userClassCode == 'Doctor') {
                $('#CoachAndDoc').css("display", "block");
                $('#DocMod').css("display", "block");
                //$("#Modules").removeClass("chosen");
                $("#Modules").trigger("liszt:updated");
                $("#Modules").chosen();
                GetDoctorDetailInfo(userId, userClassCode);
            }
            else {
                $('#CoachAndDoc').css("display", "none");
                $('#DocMod').css("display", "none");
            }



            //            var clslist = document.getElementById("userClassList");
            //            var userClass = clslist.options[clslist.selectedIndex].value;
            //            if (userClass == 'Patient') {
            //                $('#txtUserId').attr('disabled', "disabled");
            //            }
            //            else {
            //                $('#txtUserId').removeAttr('disabled');
            //            }

        });
    });
    function trim(str) {  //删除左右两端的空格
        return str.replace(/(^\s*)|(\s*$)/g, "");
    }
    function refresh(e) {
        if (e.toString() == "OK") {
            alert("保存成功！");
        }
        else {
            alert("保存失败！");
        }
        window.location.href = window.location.href;
    }
    $("#NewRole").on('click', function () {
        var clslist = document.getElementById("newUserClass");
        var newrole = clslist.options[clslist.selectedIndex].value;
        var defaultEndTime;
        $.ajax({                                                //初始化日期控件为系统当前时间+1年（默认密码有效期为一年）
            url: "/Management/GetDefaultEndTime",
            type: "GET",
            dataType: "json",
            async: false,
            data: {},
            success: function (res) {
                defaultEndTime = res.toString();
            }
        });
        $.ajax({
            url: "/Management/GetRoleNo",
            type: "GET",
            dataType: "json",
            async: false,
            data: { userClass: newrole },
            success: function (res) {
                var userId = res;
                if (userId != "") {
                    document.getElementById("txtUserId").value = userId;
                    document.getElementById("txtUserName").value = "";
                    document.getElementById("txtPassword").value = "";
                    var userClass = clslist.options[clslist.selectedIndex].text;
                    var userClassCode = clslist.options[clslist.selectedIndex].value;
                    $("#userClassList").val(userClass);
                    $("#userClassCode").val(userClassCode);
                    document.getElementById("EndDate").value = defaultEndTime;
                    document.getElementById("PhoneNo").value = "";
                    if (userClassCode == 'HealthCoach') {
                        $('#CoachAndDoc').css("display", "block");
                        $('#DocMod').css("display", "none");
                        GetDoctorDetailInfo(userId, userClassCode);
                    }
                    else if (userClassCode == 'Doctor') {
                        $('#CoachAndDoc').css("display", "block");
                        $('#DocMod').css("display", "block");
                        //                        $("#Modules").chosen();
                        //                        $("#Modules").trigger("chosen:updated");
                        GetDoctorDetailInfo(userId, userClassCode);
                    }
                    else {
                        $('#CoachAndDoc').css("display", "none");
                        $('#DocMod').css("display", "none");
                    }
                }

            }
        });
    });

    $("#Cancel").on('click', function () {
        var defaultEndTime;
        $.ajax({                                                //初始化日期控件为系统当前时间+1年（默认密码有效期为一年）
            url: "/Management/GetDefaultEndTime",
            type: "GET",
            dataType: "json",
            async: false,
            data: {},
            success: function (res) {
                defaultEndTime = res.toString();
            }
        });

        document.getElementById("txtUserId").value = "";
        document.getElementById("txtUserName").value = "";
        document.getElementById("txtPassword").value = "";
        $("#userClassList").val("");
        $("#userClassCode").val("");
        document.getElementById("EndDate").value = defaultEndTime;
        document.getElementById("PhoneNo").value = "";
        $('#txtUserId').attr('disabled', "disabled");
        $('#txtUserId').removeAttr('disabled');
        window.location.href = window.location.href;
    });

    $("#Save").bind('click', function (event) {
        //        alert("start");
        var SetMstUserFlag = false;
        var userId = document.getElementById("txtUserId").value;
        //        var clslist = document.getElementById("userClassList");
        //        var userClass = clslist.options[clslist.selectedIndex].value;
        if (userId == "") {
            //alert("请输入11位手机号");
            event.preventDefault();
            var Text = "请选择一个用户！";
            $('#addDataP').html(Text);
            $('#addDataDiv').modal({
                closeHTML: "<a href='#' title='Close' class='modal-close'>x</a>",
                containerId: 'alert-container',
                overlayClose: true     //点击蒙层关闭窗口
            });
        }
        else {
            var UserName = document.getElementById("txtUserName").value;
            var Password = document.getElementById("txtPassword").value;
            var userClass = document.getElementById("userClassList").value;
            var userClassCode = document.getElementById("userClassCode").value;
            var EndDate = document.getElementById("EndDate").value;
            var PhoneNo = document.getElementById("PhoneNo").value;
            if (PhoneNo.match(/^\d{11}$/) == null) {
                //alert("请输入11位手机号");
                event.preventDefault();
                var Text = "请输入11位手机号！";
                $('#addDataP').html(Text);
                $('#addDataDiv').modal({
                    closeHTML: "<a href='#' title='Close' class='modal-close'>x</a>",
                    containerId: 'alert-container',
                    overlayClose: true     //点击蒙层关闭窗口
                });
            }
            else {

                if (userId != "") {
                    $.ajax({
                        url: "/Management/setCmMstUser",
                        type: "GET",
                        dataType: "json",
                        async: false,
                        data: { UserId: userId, UserName: UserName, Password: Password, EndDate: EndDate, PhoneNo: PhoneNo, userClassCode: userClassCode },
                        success: function (res) {
                            SetMstUserFlag = res;
                            //                alert(res);
                        }
                    });
                }
                if (SetMstUserFlag == 1) {
                    if ((userClassCode == "Administrator") || (userClassCode == "Patient")) {
                        location.reload();
                    }
                    else {
                        var clslist = document.getElementById("UnitName");
                        var UnitName = clslist.options[clslist.selectedIndex].value;
                        var clslist = document.getElementById("Dept");
                        var Dept = clslist.options[clslist.selectedIndex].value;
                        var JobTitle = document.getElementById("JobTitle").value;

                        //alert(PhoneNo);

                        //获取多选框内容
                        var strlist = document.getElementById("Modules"); //获取Listbox 
                        var str = "";
                        //遍历Listbox，取得选中项的值 
                        if (strlist.options.length > 0) {
                            for (var i = 0; i < strlist.options.length; i++) {
                                if (strlist.options[i].selected == true) {
                                    var j = strlist.options[i].value;
                                    str += j + ","; //把Value值串起来
                                }
                            }
                            var strValue = str.replace(/,$/, ""); //去掉最后一个逗号 

                        }
                        else {
                            strValue = "";
                            alert("No Item in Listbox");
                        }

                        setDocDetailInfo(userId, userClassCode, UnitName, Dept, JobTitle, strValue);
                        //                    event.preventDefault();
                        //                    var Text = "保存成功！";
                        //                    $('#successD').html(Text);
                        //                    $('#success').modal({
                        //                        closeHTML: "<a href='#' title='Close' class='modal-close'>x</a>",
                        //                        containerId: 'alert-container',
                        //                        overlayClose: true     //点击蒙层关闭窗口
                        //                    });
                        location.reload();
                    }

                }
            }
        }
    });

    function onSearch() {//js函数开始
        setTimeout(function () {//因为是即时查询，需要用setTimeout进行延迟，让值写入到input内，再读取  
            var UserList = document.getElementById('UserListDT'); //获取table的id标识  
            var searchRole = $("#SearchRole").val();
            var searchUserId = $("#SearchUserId").val();
            var searchUserName = $("#SearchUserName").val();
            var searchText1;
            var searchText2;
            var searchText3;

            var rowsLength = UserList.rows.length; //表格总共有多少行  
            if (searchRole == "") {
                if (searchUserId == "") {
                    for (var i = 1; i < rowsLength; i++) {//按表的行数进行循环，本例第一行是标题，所以i=1，从第二行开始筛选（从0数起）   
                        searchText3 = UserList.rows[i].cells[1].innerHTML; //取得table行，列的值  
                        if (searchText3.match(searchUserName)) {//用match函数进行筛选，如果input的值，即变量 key的值为空，返回的是ture，  
                            UserList.rows[i].style.display = ''; //显示行操作，  
                        } else {
                            UserList.rows[i].style.display = 'none'; //隐藏行操作  
                        }
                    }
                }
                else if (searchUserName == "") {
                    for (var i = 1; i < rowsLength; i++) {
                        searchText2 = UserList.rows[i].cells[0].innerHTML; //取得table行，列的值
                        if (searchText2.match(searchUserId)) {
                            UserList.rows[i].style.display = ''; //显示行操作，  
                        } else {
                            UserList.rows[i].style.display = 'none'; //隐藏行操作  
                        }
                    }
                }
                else {
                    for (var i = 1; i < rowsLength; i++) {
                        searchText2 = UserList.rows[i].cells[0].innerHTML;
                        searchText3 = UserList.rows[i].cells[1].innerHTML;
                        if (searchText2.match(searchUserId) && searchText3.match(searchUserName)) {
                            UserList.rows[i].style.display = ''; //显示行操作，  
                        } else {
                            UserList.rows[i].style.display = 'none'; //隐藏行操作  
                        }
                    }
                }
            }
            else {
                if (searchUserId == "") {
                    for (var i = 1; i < rowsLength; i++) {
                        searchText1 = UserList.rows[i].cells[4].innerHTML;
                        searchText3 = UserList.rows[i].cells[1].innerHTML;
                        if (searchText1.match(searchRole) && searchText3.match(searchUserName)) {
                            UserList.rows[i].style.display = ''; //显示行操作，  
                        } else {
                            UserList.rows[i].style.display = 'none'; //隐藏行操作  
                        }
                    }
                }
                else if (searchUserName == "") {
                    for (var i = 1; i < rowsLength; i++) {
                        searchText1 = UserList.rows[i].cells[4].innerHTML;
                        searchText2 = UserList.rows[i].cells[0].innerHTML;
                        if (searchText1.match(searchRole) && searchText2.match(searchUserId)) {
                            UserList.rows[i].style.display = ''; //显示行操作，  
                        } else {
                            UserList.rows[i].style.display = 'none'; //隐藏行操作  
                        }
                    }
                }
                else {
                    for (var i = 1; i < rowsLength; i++) {
                        searchText1 = UserList.rows[i].cells[4].innerHTML;
                        searchText2 = UserList.rows[i].cells[0].innerHTML;
                        searchText3 = UserList.rows[i].cells[1].innerHTML;
                        if (searchText1.match(searchRole) && searchText2.match(searchUserId) && searchText3.match(searchUserName)) {
                            UserList.rows[i].style.display = ''; //显示行操作，  
                        } else {
                            UserList.rows[i].style.display = 'none'; //隐藏行操作  
                        }
                    }
                }
            }
        }, 200);              //200为延时时间  
    }

    function GetPhoneNo(userId) {

        var PhnoeNo = "";
        $.ajax({
            url: "/Management/GetPhoneNo",
            type: "GET",
            dataType: "json",
            async: false,
            data: { UserId: userId },
            success: function (res) {
                //alert(1);
                if (res == null) {
                    //                    PhnoeNo = "未填";
                    PhnoeNo = "";
                }
                else {
                    //alert(res);
                    PhnoeNo = res.toString();
                }
                //document.getElementById("PhnoeNo").value = res.toString();
            }
        });
        //alert(PhnoeNo);
        return PhnoeNo
    }



    function GetDoctorDetailInfo(userId, userClassCode) {
        $.ajax({
            url: "/Management/GetDoctorDetailInfo",
            type: "GET",
            dataType: "json",
            async: false,
            data: { UserId: userId, userClassCode: userClassCode },
            success: function (res) {
                var UnitName = res.split("_")[0];
                var Dept = res.split("_")[1];
                var JobTitle = res.split("_")[2];
                document.getElementById("UnitName").value = UnitName;
                document.getElementById("Dept").value = Dept;
                document.getElementById("JobTitle").value = JobTitle;
                if (userClassCode == "Doctor") {
                    var len = res.split("_").length - 3;
                    var m = [];
                    var Module = "";
                    for (i = 0; i < len; i++) {
                        Module = res.split("_")[3 + i];
                        m.push(Module);
                    }
                    $("#Modules").val(m);
                    $("#Modules").trigger("chosen:updated");

                    //遍历Listbox，取得选中项的值 



                }
            }
        });
    }

    function setDocDetailInfo(userId, userClassCode, UnitName, Dept, JobTitle, Modules) {

        $.ajax({
            url: "/Management/setDocDetailInfo",
            type: "GET",
            dataType: "json",
            async: false,
            data: { UserId: userId, userClassCode: userClassCode, UnitName: UnitName, Dept: Dept, JobTitle: JobTitle, Modules: Modules },
            success: function (res) {
                if (res == true) {
                    //alert("setDocDetailInfo->success");

                }

            }
        });
    }


</script>